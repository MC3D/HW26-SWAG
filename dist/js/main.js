!function(){"use strict";window.Application=Ember.Application.create({LOG_TRANSITIONS:!0}),Application.ref=new Firebase("https://myswag.firebaseio.com/"),Application.ApplicationAdapter=DS.FirebaseAdapter.extend({firebase:Application.ref}),filepicker.setKey("AZCePNZlYTB2qdKHk2cOiz"),Ember.Application.initializer({name:"firebase-session",initialize:function(e,t){var r=localStorage.getItem("firebasetoken");if(r){t.deferReadiness();var n=e.lookup("controller:session");n.authWithToken(r).finally(function(){t.advanceReadiness()}).catch(function(e){console.error(e)}).then(function(){console.log("success")})}}})}(),function(){"use strict";Application.VerifyUser=Ember.Mixin.create({beforeModel:function(){var e=this.controllerFor("session").get("currentUser");e||this.transitionTo("index")}})}(),function(){"use strict";Application.Router.map(function(){this.route("index",{path:"/"}),this.route("search",{path:"/searchpeople"}),this.resource("profile",{path:"/profile"},function(){this.route("aversions"),this.route("avatar"),this.route("dates"),this.route("interests"),this.route("sizes")}),this.route("swag",{path:"/myswag"}),this.resource("friends",{path:"/friends"},function(){this.route("show",{path:":user_id"})})}),Application.FriendsIndexRoute=Ember.Route.extend(Application.VerifyUser,{model:function(){var e=this.controllerFor("application").get("currentUser");return e.get("friends")}}),Application.FriendsShowRoute=Ember.Route.extend(Application.VerifyUser,{}),Application.IndexRoute=Ember.Route.extend({renderTemplate:function(){this.render("index"),this.render("login",{into:"index",outlet:"login",controller:"login"}),this.render("signup",{into:"index",outlet:"signup",controller:"signup"})}}),Application.ProfileRoute=Ember.Route.extend(Application.VerifyUser,{}),Application.ProfileAvatarRoute=Ember.Route.extend(Application.VerifyUser,{}),Application.ProfileAversionsRoute=Ember.Route.extend(Application.VerifyUser,{model:function(){var e=this.controllerFor("application").get("currentUser").id;return this.store.find("user",e)}}),Application.ProfileDatesRoute=Ember.Route.extend(Application.VerifyUser,{}),Application.ProfileInterestsRoute=Ember.Route.extend(Application.VerifyUser,{model:function(){var e=this.controllerFor("application").get("currentUser").id;return this.store.find("user",e)}}),Application.ProfileSizesRoute=Ember.Route.extend(Application.VerifyUser,{}),Application.SearchRoute=Ember.Route.extend(Application.VerifyUser,{model:function(){var e=this.controllerFor("application").get("currentUser");return Ember.RSVP.hash({friends:e.get("friends.content.content"),users:this.store.find("user")}).then(function(t){var r=t.friends,n=t.users;return n.removeObject(e),n.removeObjects(r),n})}}),Application.SwagRoute=Ember.Route.extend(Application.VerifyUser,{})}(),function(){"use strict";Application.ProfileDatesView=Ember.View.extend({didInsertElement:function(){this.$(".birthday").pickadate(),this.$(".anniversary").pickadate()}}),Application.FriendsShowView=Ember.View.extend({didInsertElement:function(){var e=this,t=Handlebars.compile("{{#each content}}<p>{{this}}</p>{{/each}}");console.log(e.get("controller.model.interests")),this.$(".drop-dates").each(function(){new Drop({target:this,content:t({content:e.get("controller.dates")}),position:"top left",openOn:"click",classes:"drop-theme-arrows-bounce-dark",constrainToScrollParent:!1})}),this.$(".drop-sizes").each(function(){new Drop({target:this,content:t({content:e.get("controller.sizes")}),position:"top left",openOn:"click",classes:"drop-theme-arrows-bounce-dark",constrainToScrollParent:!1})}),this.$(".drop-interests").each(function(){new Drop({target:this,content:t({content:e.get("controller.interests")}),position:"top left",openOn:"click",classes:"drop-theme-arrows-bounce-dark",constrainToScrollParent:!1})}),this.$(".drop-aversions").each(function(){new Drop({target:this,content:t({content:e.get("controller.aversions")}),position:"top left",openOn:"click",classes:"drop-theme-arrows-bounce-dark",constrainToScrollParent:!1})})}})}(),function(){"use strict";Application.ApplicationController=Ember.Controller.extend({needs:["session"],currentUser:Ember.computed.alias("controllers.session.currentUser"),actions:{logOut:function(){localStorage.removeItem("firebasetoken"),Application.reset();var e=Application.ref;e.unauth()},goToSwag:function(){this.transitionToRoute("swag")},goToFriends:function(){this.transitionToRoute("friends")},goToProfile:function(){this.transitionToRoute("profile.avatar")}}})}(),function(){"use strict";Application.LoginController=Ember.Controller.extend({needs:["session"],actions:{logIn:function(){var e=this,t=this.getProperties("email","password");this.get("controllers.session").authUser(t).then(function(){console.log("there"),e.transitionToRoute("swag")})}}})}(),function(){"use strict";Application.SearchController=Ember.ArrayController.extend({sortProperties:["username"],sortAscending:!0,actions:{viewFriends:function(){this.transitionToRoute("friends")}}}),Application.SearchItemController=Ember.ObjectController.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),disabled:!1,actions:{addFriend:function(){var e=this.get("model");this.get("currentUser").get("friends").addObject(e),this.get("currentUser").save(),e.get("friends").addObject(this.get("currentUser")),e.save(),this.set("disabled",!0)},removeFriend:function(){var e=this.get("model");this.get("currentUser").get("friends").removeObject(e),this.get("currentUser").save(),e.get("friends").removeObject(this.get("currentUser")),e.save(),this.set("disabled",!0)}}})}(),function(){"use strict";Application.SessionController=Ember.Controller.extend({needs:["application"],currentUser:null,authUser:function(e){var t=this;return new Ember.RSVP.Promise(function(r,n){Application.ref.authWithPassword(e,function(e,i){null===e?t.setStorage(i).then(r,n):console.log("error in Session Controller authUser")})})},setStorage:function(e){var t=this;return new Ember.RSVP.Promise(function(r,n){localStorage.setItem("firebasetoken",e.token),console.log("About to find user",e.uid),t.store.find("user",e.uid).then(function(e){console.log("User:",e),t.set("currentUser",e),r(e)},function(i){console.error("Not found",i);var o=t.store.recordForId("user",e.uid);o?(o.loadedData(),t.set("currentUser",o),r(o)):n()})})},authWithToken:function(e){var t=this;return new Ember.RSVP.Promise(function(r,n){Application.ref.authWithCustomToken(e,function(e,i){null===e?(t.setStorage(i).then(r,n),console.log("Login Succeeded!",i)):(n(e),console.log("Error authenticating user:",e))})})}})}(),function(){"use strict";Application.SignupController=Ember.ArrayController.extend({needs:["session"],actions:{signUp:function(){var e=this,t=this.getProperties("email","password");Application.ref.createUser(t,function(r){r?console.log("Error creating user:",r):e.get("controllers.session").authUser(t).then(function(t){console.log("here it is"),t.setProperties({username:e.get("username"),email:e.get("email")}),t.save().then(function(){console.log("User created successfully"),e.transitionToRoute("profile.avatar")})})})}}})}(),function(){"use strict";Application.SwagController=Ember.Controller.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{addImage:function(){var e=this;filepicker.pickAndStore({},{},function(t){e.set("swagURL",t[0].url)})},saveSwag:function(){var e=this.store.createRecord("swag",{swagURL:this.get("swagURL"),description:this.get("description"),retailer:this.get("retailer"),location:this.get("location"),price:this.get("price")});e.save(),this.get("currentUser.swagbag").addObject(e),this.get("currentUser").save(),this.set("swagURL",""),this.set("description",""),this.set("retailer",""),this.set("location",""),this.set("price","")}}}),Application.SwagItemController=Ember.ObjectController.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{removeSwag:function(){var e=this.get("currentUser");e.get("swagbag").removeObject(this.get("swag")),e.save(),this.get("model").destroyRecord()}}})}(),function(){"use strict";Application.ProfileAversionsController=Ember.Controller.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{addAversion:function(){var e=this.store.createRecord("aversion",{aversionText:this.get("aversionText")});this.get("currentUser").get("aversions").addObject(e),this.get("currentUser").save(),this.set("aversionText","")}}}),Application.AversionController=Ember.ObjectController.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{removeAversion:function(){var e=this.get("currentUser");e.get("aversions").removeObject(this.get("model")),e.save()}}})}(),function(){"use strict";Application.ProfileAvatarController=Ember.Controller.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{addAvatar:function(){var e=this;filepicker.pickAndStore({},{},function(t){e.set("currentUser.imgURL",t[0].url)})},updateProfile:function(){this.get("currentUser").save(),window.alert("Profile Picture Saved")}}})}(),function(){"use strict";Application.ProfileDatesController=Ember.Controller.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{updateProfile:function(){this.get("currentUser").save(),window.alert("Dates Saved")}}})}(),function(){"use strict";Application.ProfileInterestsController=Ember.Controller.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{addInterest:function(){var e=this.store.createRecord("interest",{interestText:this.get("interestText")});console.log(e),this.get("currentUser").get("interests").addObject(e),this.get("currentUser").save(),this.set("interestText","")}}}),Application.InterestController=Ember.ObjectController.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{removeInterest:function(){var e=this.get("currentUser");e.get("interests").removeObject(this.get("model")),e.save()}}})}(),function(){"use strict";Application.ProfileSizesController=Ember.Controller.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{updateProfile:function(){this.get("currentUser").save(),window.alert("Sizes Saved")}}})}(),function(){"use strict";Application.FriendsIndexController=Ember.ArrayController.extend({sortProperties:["username"],sortAscending:!0,actions:{findFriends:function(){this.transitionToRoute("search")}}}),Application.FriendsItemController=Ember.ObjectController.extend({needs:["application"],currentUser:Ember.computed.alias("controllers.application.currentUser"),actions:{removeFriend:function(){var e=this.get("model");this.get("currentUser").get("friends").removeObject(e),this.get("currentUser").save(),e.get("friends").removeObject(this.get("currentUser")),e.save()}}})}(),function(){"use strict";Application.FriendsShowController=Ember.Controller.extend({birthday:"Birthday:",anniversary:"Anniversary:",hatSize:"Hat Size:",shirtSize:"Shirt Size:",pantSize:"Pant Size:",shoeSize:"Shoe Size:",avone:"Purple",avtwo:"Sugar Candy",intone:"Caramel",inttwo:"Dinosaurs",intthree:"Sushi",dates:Ember.computed.collect("birthday","model.birthday","anniversary","model.anniversary"),sizes:Ember.computed.collect("hatSize","model.hatSize","shirtSize","model.shirtSize","pantSize","model.pantSize","shoeSize","model.shoeSize"),aversions:Ember.computed.collect("avone","avtwo"),interests:Ember.computed.collect("intone","inttwo","intthree")})}(),function(){"use strict";Application.Aversion=DS.Model.extend({aversionText:DS.attr("string")})}(),function(){"use strict";Application.Interest=DS.Model.extend({interestText:DS.attr("string")})}(),function(){"use strict";Application.User=DS.Model.extend({username:DS.attr("string"),email:DS.attr("string"),imgURL:DS.attr("string"),birthday:DS.attr("string"),anniversary:DS.attr("string"),beltSize:DS.attr("string"),hatSize:DS.attr("string"),pantSize:DS.attr("string"),shirtSize:DS.attr("string"),shoeSize:DS.attr("string"),interests:DS.hasMany("interest",{embedded:!0}),aversions:DS.hasMany("aversion",{embedded:!0}),swagbag:DS.hasMany("swag",{async:!0}),friends:DS.hasMany("user",{async:!0})})}(),function(){"use strict";Application.Swag=DS.Model.extend({swagURL:DS.attr("string"),description:DS.attr("string"),retailer:DS.attr("string"),location:DS.attr("string"),price:DS.attr("string")})}();